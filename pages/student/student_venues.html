<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>University of Makati - ECP Venues</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Century Gothic', sans-serif; }
    body { background-color: #f4f5f7; display: flex; flex-direction: column; min-height: 100vh; }
    
    /* NAV */
    nav { background-color: #022d6d; color: white; padding: 10px 30px; height: 60px; display: flex; align-items: center; position: fixed; top: 0; width: 100%; z-index: 1000; }
    nav img { height: 35px; margin-right: 15px; }
    
    /* SIDEBAR */
    .sidebar { position: fixed; top: 60px; left: 0; width: 200px; background: white; bottom: 0; border-right: 1px solid #ddd; padding: 20px 0; display: flex; flex-direction: column; gap: 5px; }
    .sidebar a { display: block; padding: 12px 20px; color: #022d6d; text-decoration: none; font-size: 14px; }
    .sidebar a:hover, .sidebar a.active { background-color: #022d6d; color: white; border-radius: 4px; margin: 0 10px; }
    .btn-logout { background: #f30000; color: white; border: none; width: 80%; padding: 10px; margin: auto 10% 20px; border-radius: 3px; cursor: pointer; }
    
    /* MAIN CONTENT */
    .main-content { margin-left: 210px; margin-top: 80px; padding: 20px 40px; flex: 1; }
    .venues-container { display: flex; flex-wrap: wrap; gap: 20px; margin-top: 20px; }
    
    /* CARDS */
    .venue-card { background: white; border-radius: 8px; border: 1px solid #dcdcdc; overflow: hidden; width: 300px; cursor: pointer; transition: 0.2s; }
    .venue-card:hover { transform: translateY(-4px); box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
    .venue-card img { width: 100%; height: 150px; object-fit: cover; background: #eee; }
    .venue-details { padding: 15px; }
    .venue-details h3 { font-size: 15px; color: #1a2b6d; margin-bottom: 5px; }
    .location-footer { text-align: center; padding: 8px; color: #1a2b6d; font-size: 13px; font-weight: bold; background: #f9f9f9; border-top: 1px solid #ddd; }
    
    /* DETAIL VIEW */
    .venue-detail-section { display: none; background: white; border-radius: 8px; padding: 40px; margin-top: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
    .back-btn { background: #1a2b6d; color: white; padding: 8px 16px; border: none; border-radius: 4px; margin-bottom: 30px; cursor: pointer; }
    .venue-header { display: flex; gap: 30px; margin-bottom: 20px; border-bottom: 1px solid #eee; padding-bottom: 20px; }
    .venue-header img { width: 50%; max-width: 500px; border-radius: 8px; object-fit: cover; }
    .info-block { margin-bottom: 15px; }
    .info-label { color: #f36b00; font-weight: bold; font-size: 14px; display: block; }
    
    /* FOOTER (Matching Style) */
    footer {
      background-color: #242424;
      color: #f36b00;
      display: flex;
      justify-content: space-around;
      align-items: flex-start;
      padding: 40px 80px;
      font-size: 16px;
      flex-wrap: wrap;
      margin-top: 40px;
    }

    .footer-section {
      max-width: 400px;
      margin-left: 80px;
    }

    footer h4 {
      color: #f36b00;
      margin-bottom: 10px;
    }

    footer p {
      color: white;
      font-size: 14px;
      line-height: 1.6;
    }

    footer a {
      color: white;
      text-decoration: underline;
      font-size: 14px;
    }

    footer a:hover {
      color: #f36b00;
    }

        /* NAVIGATION BAR */
        nav {
      background-color: #022d6d;
      color: white;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 30px;
      height: 60px;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 1000;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .nav-left {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    nav img {
      height: 35px;
      margin-left: 10px;
    }

    nav span {
      font-size: 16px;
      font-weight: bold;
      letter-spacing: 0.5px;
    }

    .nav-right .account-link {
      color: #ccc;
      font-size: 12px;
      text-decoration: none;
      border: 1px solid #ccc;
      padding: 5px 10px;
      border-radius: 15px;
      transition: 0.3s;
    }

    .nav-right .account-link:hover {
      color: white;
      border-color: white;
    }
  </style>
</head>
<body>
  <nav>
    <div class="nav-left">
      <img src="../../images/UMAK LOGO.png" alt="UMak Logo">
      <span>University of Makati - ECP</span>
    </div>
    <div class="nav-right">
      <a href="student_account.html" class="account-link">‚öôÔ∏è Settings</a>
    </div>
  </nav>

  <div class="sidebar">
    <a href="student_dashboard.html">Dashboard</a>
    <a href="student_events.html">Events</a>
    <a href="student_venues.html" class="active">Venues</a> 
    <a href="student_post_eval.html">Post-Evaluation</a>
    <a href="student_my_events.html">My Events</a>
    <a href="student_messages.html" class="sidebar-link">Messages</a>
    <button class="btn-logout" onclick="logout()">Logout</button>
  </div>

  <div class="main-content" id="venues-list">
    <h2 style="color: #f36b00; margin-bottom: 20px;">University Venues</h2>
    <div class="venues-container" id="venues-container">Loading...</div>
  </div>

  <div class="main-content venue-detail-section" id="venue-detail">
    <button class="back-btn" onclick="closeDetails()">‚Üê Back to Venues</button>
    <div class="venue-header">
      <img id="detailImage" src="">
      <div class="venue-info">
        <h2 id="detailName" style="color:#022d6d; margin-bottom:15px;">Venue Name</h2>
        <div class="info-block"><span class="info-label">Capacity</span><span id="detailCapacity"></span></div>
        <div class="info-block"><span class="info-label">Location</span><span id="detailLocation"></span></div>
        <div class="info-block"><span class="info-label">Amenities</span><span id="detailAmenities"></span></div>
      </div>
    </div>
    <div class="description">
      <h3 style="color:#1a2b6d; margin-bottom:15px; border-left:4px solid #f36b00; padding-left:10px;">Description / Rules</h3>
      <p id="detailDescription" style="white-space: pre-line; line-height: 1.6; color: #333;"></p>
    </div>
  </div>

  <footer>
    <div class="footer-section">
      <h4>About ECP</h4>
      <p>
        The Event Coordination Portal serves as the central management system for events
        organized by the colleges of the University of Makati. It intends to oversee event
        operations, track student participation, and maintain an updated event calendar.
      </p>
    </div>
    <div class="footer-section">
      <h4>Links</h4>
      <a href="https://www.umak.edu.ph/" target="_blank">University of Makati</a>
    </div>
  </footer>

  <script>
    const API_URL = '../../api/student_venues.php';
    const defaultImage = '../../images/UMAK LOGO.png';

    async function loadVenues() {
      try {
        const res = await fetch(API_URL);
        const data = await res.json();
        
        const container = document.getElementById('venues-container');
        container.innerHTML = '';

        if (data.success && data.venues.length > 0) {
          data.venues.forEach(venue => {
            const imgUrl = venue.image_url ? venue.image_url : defaultImage;
            const card = document.createElement('div');
            card.className = 'venue-card';
            card.onclick = () => showDetails(venue);
            card.innerHTML = `
              <img src="${imgUrl}" onerror="this.src='${defaultImage}'">
              <div class="venue-details"><h3>${venue.venue_name}</h3></div>
              <div class="location-footer">üìç ${venue.location}</div>
            `;
            container.appendChild(card);
          });
        } else {
          container.innerHTML = '<p>No venues found.</p>';
        }
      } catch (e) {
        console.error(e);
      }
    }

    function showDetails(venue) {
      document.getElementById('venues-list').style.display = 'none';
      document.getElementById('venue-detail').style.display = 'block';
      
      document.getElementById('detailName').innerText = venue.venue_name;
      document.getElementById('detailCapacity').innerText = venue.capacity + " Persons";
      document.getElementById('detailLocation').innerText = venue.location;
      document.getElementById('detailAmenities').innerText = venue.amenities;
      document.getElementById('detailDescription').innerText = venue.description;
      document.getElementById('detailImage').src = venue.image_url || defaultImage;
      window.scrollTo(0,0);
    }

    function closeDetails() {
      document.getElementById('venue-detail').style.display = 'none';
      document.getElementById('venues-list').style.display = 'block';
    }

    function logout() {
        if(confirm("Logout?")) {
            localStorage.removeItem('user_session');
            window.location.href = "../login_signup.html";
        }
    }

    loadVenues();
  </script>
</body>
</html>